<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MSS Widget MT – Advanced Configuration</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Shared MSS design system -->
  <link id="themeCss" rel="stylesheet" href="/themes/MSSStylesheet.css?v=1" />
  <!-- Optional admin-specific tweaks -->
  <link rel="stylesheet" href="/themes/mss-config-admin.css?v=1" />
</head>
<body class="mssVoxAurora">
  

  <!-- Main layout -->
  <main class="mss-main">
    <div class="mss-main-inner">
      <div class="mss-admin-layout">
        <!-- LEFT COLUMN: Config sections + Actions -->
        <div class="mss-config-column">

          <!-- BRANDING -->
          <details class="mss-card mss-section" open>
            <summary>BRANDING</summary>
            <div class="mss-field-group">
              <label for="cfgHeadline" class="mss-label">Headline</label>
              <input id="cfgHeadline" type="text" class="mss-input" />
            </div>

            <div class="mss-field-group">
              <label for="cfgPoweredBy" class="mss-label">Powered-by text</label>
              <input id="cfgPoweredBy" type="text" class="mss-input" />
              <p class="mss-help-text">
                Shown under the headline, for example: “Powered by MSS Vox”.
              </p>
            </div>

            <div class="mss-field-group">
  <label class="mss-label">Brand logo (PNG/JPG)</label>

  <div class="mss-file-row">
    <label for="cfgBrandLogoInput" class="mss-btn-secondary mss-btn-file">
      Choose file
    </label>
    <span id="cfgBrandLogoName" class="mss-file-name mss-muted">
      No file chosen
    </span>
    <input
      id="cfgBrandLogoInput"
      type="file"
      accept="image/*"
      class="mss-input-file-hidden"
    />
  </div>

  <p class="mss-help-text">
    Base64 is stored in <code>config.brandLogo</code>.
  </p>
</div>
          </details>

          <!-- API & AUTH -->
          <details class="mss-card mss-section" open>
            <summary>API &amp; AUTH</summary>

            <div class="mss-field-group mss-field-inline">
              <label class="mss-checkbox-label">
                <input id="cfgApiEnabled" type="checkbox" />
                <span>Enable API</span>
              </label>
              <p class="mss-help-text">
                If disabled, widget records but won't submit.
              </p>
            </div>

            <div class="mss-field-group">
              <label for="cfgAdminKey" class="mss-label">X-ADMIN-KEY</label>
              <input id="cfgAdminKey" type="text" class="mss-input" />
              <p class="mss-help-text">
                Sent as <code>X-ADMIN-KEY</code> header for admin PUT calls.
              </p>
            </div>

            <div class="mss-field-group">
              <label for="cfgApiBaseUrl" class="mss-label">API base URL</label>
              <input id="cfgApiBaseUrl" type="text" class="mss-input" />
            </div>

            <div class="mss-field-group mss-field-inline-two">
              <div>
                <label for="cfgApiKey" class="mss-label">API key</label>
                <input id="cfgApiKey" type="text" class="mss-input" />
              </div>
              <div>
                <label for="cfgApiSecret" class="mss-label">API secret</label>
                <input id="cfgApiSecret" type="text" class="mss-input" />
              </div>
            </div>
          </details>

          <!-- LOGGING & UPLOADS -->
          <details class="mss-card mss-section" open>
            <summary>LOGGING &amp; UPLOADS</summary>

            <div class="mss-field-group mss-field-inline">
              <label class="mss-checkbox-label">
                <input id="cfgLoggerEnabled" type="checkbox" />
                <span>Enable logging</span>
              </label>
              <label class="mss-checkbox-label">
                <input id="cfgPermitUpload" type="checkbox" />
                <span>Allow file upload</span>
              </label>
            </div>

            <div class="mss-field-group">
              <label for="cfgLoggerUrl" class="mss-label">Logger endpoint</label>
              <input id="cfgLoggerUrl" type="text" class="mss-input" />
              <p class="mss-help-text">
                Used for upload + logging, e.g. <code>/log/submission</code>.
              </p>
            </div>
          </details>

          <!-- AUDIO & THEME -->
          <details class="mss-card mss-section" open>
            <summary>AUDIO &amp; THEME</summary>

            <div class="mss-field-group mss-field-inline-two">
              <div>
                <label for="cfgAudioMin" class="mss-label">Min seconds</label>
                <input id="cfgAudioMin" type="number" class="mss-input" min="0" />
              </div>
              <div>
                <label for="cfgAudioMax" class="mss-label">Max seconds</label>
                <input id="cfgAudioMax" type="number" class="mss-input" min="0" />
              </div>
            </div>

            <div class="mss-field-group">
              <label for="cfgTheme" class="mss-label">Theme</label>
              <select id="cfgTheme" class="mss-input">
                <option value="apple">Apple</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="system">System</option>
              </select>
            </div>
          </details>

          <!-- LABELS & TEXT -->
          <details class="mss-card mss-section" open>
            <summary>LABELS &amp; TEXT</summary>

            <div class="mss-field-group">
              <label for="cfgRecordLabel" class="mss-label">Record Button</label>
              <input id="cfgRecordLabel" type="text" class="mss-input" />
            </div>

            <div class="mss-field-group mss-field-inline-two">
              <div>
                <label for="cfgPrevLabel" class="mss-label">Previous</label>
                <input id="cfgPrevLabel" type="text" class="mss-input" />
              </div>
              <div>
                <label for="cfgNextLabel" class="mss-label">Next</label>
                <input id="cfgNextLabel" type="text" class="mss-input" />
              </div>
            </div>

            <div class="mss-field-group mss-field-inline-two">
              <div>
                <label for="cfgUploadLabel" class="mss-label">Upload</label>
                <input id="cfgUploadLabel" type="text" class="mss-input" />
              </div>
              <div>
                <label for="cfgStopLabel" class="mss-label">Stop</label>
                <input id="cfgStopLabel" type="text" class="mss-input" />
              </div>
            </div>

            <div class="mss-field-group">
              <label for="cfgNotRecordingLabel" class="mss-label">Not Recording</label>
              <input id="cfgNotRecordingLabel" type="text" class="mss-input" />
            </div>

            <div class="mss-field-group">
              <label for="cfgSubmitLabel" class="mss-label">Submit Button</label>
              <input id="cfgSubmitLabel" type="text" class="mss-input" />
            </div>
          </details>

          <!-- ACTIONS -->
          <details class="mss-card mss-section" open>
            <summary>ACTIONS</summary>

            <div class="mss-actions-row" style="margin-top: 0.75rem;">
              <button id="saveBtn" class="mss-btn-primary">Save config</button>
              <button id="reloadBtn" class="mss-btn-secondary">Reload from server</button>
            </div>

            <div class="mss-actions-row" style="margin-top: 0.75rem;">
              <button id="openWidgetBtn" class="mss-btn-secondary">Open Widget</button>
              <button id="exportBtn" class="mss-btn-secondary">Export JSON</button>
            </div>

            <p id="status" class="mss-help-text" style="margin-top: 0.75rem;">
              Ready
            </p>
          </details>
        </div>

        <!-- RIGHT COLUMN: Live preview only -->
        <section class="mss-card mss-widget-preview-card">
  <h2 class="mss-card-title">Live Preview</h2>
  <p class="mss-help-text">Approximate widget look</p>

  <!-- Header (logo + headline + powered-by) -->
  <div class="mss-widget-header">
    <img
      id="previewLogo"
      class="mss-widget-logo"
      alt="Brand logo"
      style="visibility:hidden;"
    />
    <div>
      <div id="previewHeadline" class="mss-widget-title">CEFR Assessment</div>
      <div id="previewPowered" class="mss-widget-powered">
        Powered by MSS Vox
      </div>
    </div>
  </div>

  <!-- Question text -->
  <div id="previewQuestion" class="mss-widget-question">
    Question preview will appear here.
  </div>

  <!-- Prev / Next row (non-functional; visual only) -->
  <div class="mss-nav-row">
    <button class="mss-btn mss-btn-outline" disabled>Previous</button>
    <button id="previewNextBtn" class="mss-btn mss-btn-outline">
      Next
    </button>
  </div>

  <!-- Recording / upload controls -->
  <div class="mss-toolbar-row">
    <button id="previewRecordBtn" class="mss-btn mss-btn-primary">
      Record your response
    </button>
    <button id="previewStopBtn" class="mss-btn" disabled>Stop</button>
    <button id="previewUploadBtn" class="mss-btn mss-btn-outline">
      Choose an audio file
    </button>
  </div>

  <!-- Recording status -->
  <div class="mss-preview-recbar">
    <span class="mss-preview-dot"></span>
    <span id="previewNotRecording" class="mss-muted">
      Not recording
    </span>
  </div>

  <!-- Submit row -->
  <div class="mss-submit-row">
    <button id="previewSubmitBtn" class="mss-btn mss-btn-primary">
      Submit for scoring
    </button>
  </div>
</section>
        </div>
      </div>
    </div>
  </main>

  <!-- Config admin script -->
  <script src="/config-admin/ConfigAdmin.js?v=4"></script>
</body>
</html>
