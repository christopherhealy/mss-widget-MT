<!-- MSS Widget MT – ConfigAdmin.html – 2025-11-13 12:40 EST -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MSS Widget – Advanced Config</title>

  <!-- Shared MSS design system -->
  <link id="themeCss" rel="stylesheet" href="/themes/MSSStylesheet.css?v=1" />
  <!-- Optional admin-specific tweaks -->
  <link rel="stylesheet" href="/themes/mss-config-admin.css?v=1" />
</head>
<body class="mssVoxAurora">
  <header class="mss-top">
    <div class="mss-top-inner">
      <div class="mss-row">
        <div class="mss-stack-tight">
          <div class="mss-pill">MSS WIDGET MT</div>
          <div class="mss-titlesm">Advanced Configuration</div>
        </div>
      </div>
      <div class="mss-row">
        <div class="mss-stack-tight" style="text-align:right;">
          <div id="slugDisplay" class="mss-muted">slug=…</div>
          <div id="meta" class="mss-meta"></div>
        </div>
      </div>
    </div>
  </header>

  <main class="mss-shell">
    <div class="mss-layout">
      <!-- LEFT: configuration form -->
      <section aria-label="Widget configuration">

        <!-- BRANDING -->
        <details class="mss-section" open>
          <summary class="mss-section-header">
            <span class="mss-pill">Branding</span>
            <span class="mss-muted">Headline, powered-by, logo</span>
          </summary>
          <div class="mss-section-body">
            <div class="mss-field">
              <label class="mss-label" for="cfgHeadline">Headline</label>
              <input id="cfgHeadline" class="mss-input" type="text"
                     placeholder="e.g., CEFR Assessment" />
            </div>

            <div class="mss-field">
              <label class="mss-label" for="cfgPoweredBy">Powered-by text</label>
              <input id="cfgPoweredBy" class="mss-input" type="text"
                     placeholder="Powered by MSS Vox" />
            </div>

            <div class="mss-field">
              <label class="mss-label" for="cfgBrandLogoInput">Brand logo (PNG/JPG)</label>
              <input id="cfgBrandLogoInput" class="mss-input" type="file"
                     accept="image/png,image/jpeg" />
              <div class="mss-help">
                Base64 is stored in <code>config.brandLogo</code>.
              </div>
            </div>
          </div>
        </details>

        <!-- API & AUTH -->
        <details class="mss-section" open>
          <summary class="mss-section-header">
            <span class="mss-pill">API &amp; Auth</span>
            <span class="mss-muted">Scoring endpoint + keys</span>
          </summary>

          <div class="mss-section-body">
            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label">
                  <input id="cfgApiEnabled" type="checkbox" />
                  Enable API
                </label>
                <div class="mss-help">
                  If disabled, widget records but won't submit.
                </div>
              </div>

              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgAdminKey">X-ADMIN-KEY</label>
                <input id="cfgAdminKey" class="mss-input" type="text"
                       placeholder="Admin Key" />
              </div>
            </div>

            <div class="mss-field">
              <label class="mss-label" for="cfgApiBaseUrl">API base URL</label>
              <input id="cfgApiBaseUrl" class="mss-input" type="text" />
            </div>

            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgApiKey">API key</label>
                <input id="cfgApiKey" class="mss-input" type="text" />
              </div>
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgApiSecret">API secret</label>
                <input id="cfgApiSecret" class="mss-input" type="text" />
              </div>
            </div>
          </div>
        </details>

        <!-- LOGGING -->
        <details class="mss-section" open>
          <summary class="mss-section-header">
            <span class="mss-pill">Logging &amp; Uploads</span>
          </summary>

          <div class="mss-section-body">
            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label">
                  <input id="cfgLoggerEnabled" type="checkbox" />
                  Enable logging
                </label>
              </div>

              <div class="mss-field mss-field-half">
                <label class="mss-label">
                  <input id="cfgPermitUpload" type="checkbox" />
                  Allow file upload
                </label>
              </div>
            </div>

            <div class="mss-field">
              <label class="mss-label" for="cfgLoggerUrl">Logger endpoint</label>
              <input id="cfgLoggerUrl" class="mss-input" type="text"
                     placeholder="https://…" />
            </div>
          </div>
        </details>

        <!-- AUDIO & THEME -->
        <details class="mss-section" open>
          <summary class="mss-section-header">
            <span class="mss-pill">Audio &amp; Theme</span>
          </summary>

          <div class="mss-section-body">
            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgAudioMin">Min seconds</label>
                <input id="cfgAudioMin" class="mss-input" type="number" min="0" />
              </div>

              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgAudioMax">Max seconds</label>
                <input id="cfgAudioMax" class="mss-input" type="number" min="0" />
              </div>
            </div>

            <div class="mss-field">
              <label class="mss-label" for="cfgTheme">Theme</label>
              <select id="cfgTheme" class="mss-select">
                <option value="apple">Apple</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="system">System</option>
              </select>
            </div>
          </div>
        </details>

        <!-- LABELS -->
        <details class="mss-section" open>
          <summary class="mss-section-header">
            <span class="mss-pill">Labels &amp; Text</span>
          </summary>

          <div class="mss-section-body">
            <div class="mss-field">
              <label class="mss-label" for="cfgRecordLabel">Record Button</label>
              <input id="cfgRecordLabel" class="mss-input" type="text" />
            </div>

            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgPrevLabel">Previous</label>
                <input id="cfgPrevLabel" class="mss-input" type="text" />
              </div>
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgNextLabel">Next</label>
                <input id="cfgNextLabel" class="mss-input" type="text" />
              </div>
            </div>

            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgUploadLabel">Upload</label>
                <input id="cfgUploadLabel" class="mss-input" type="text" />
              </div>
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgStopLabel">Stop</label>
                <input id="cfgStopLabel" class="mss-input" type="text" />
              </div>
            </div>

            <div class="mss-field-row">
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgNotRecordingLabel">Not Recording</label>
                <input id="cfgNotRecordingLabel" class="mss-input" type="text" />
              </div>
              <div class="mss-field mss-field-half">
                <label class="mss-label" for="cfgSubmitLabel">Submit</label>
                <input id="cfgSubmitLabel" class="mss-input" type="text" />
              </div>
            </div>
          </div>
        </details>
      </section>

      <!-- RIGHT: PREVIEW + ACTIONS -->
      <aside>
        <!-- Preview -->
        <div class="mss-card">
          <div class="mss-card-header">
            <div class="mss-card-title">Live Preview</div>
            <div class="mss-muted">Approximate widget look</div>
          </div>

          <div class="mss-card">
            <div class="mss-head">
              <img id="previewLogo" class="mss-logo" />
              <div>
                <div id="previewHeadline" class="mss-card-title"></div>
                <div id="previewPowered" class="mss-muted"></div>
              </div>
            </div>

            <div id="previewQuestion"
                 class="mss-stack-tight mss-question-preview mss-muted"
                 style="margin-top:10px;">
              Question preview will appear here.
            </div>

            <div class="mss-toolbar" style="margin-top:12px;">
              <button id="previewRecordBtn" class="mss-btn mss-btn-primary">
                Record
              </button>
              <button id="previewStopBtn" class="mss-btn mss-btn-outline">
                Stop
              </button>
              <button id="previewNextBtn" class="mss-btn mss-btn-outline">
                Next
              </button>

              <button id="previewUploadBtn" class="mss-btn mss-btn-ghost"
                      style="margin-top:8px;">
                Upload
              </button>
              <button id="previewSubmitBtn" class="mss-btn mss-btn-primary"
                      style="margin-top:8px;">
                Submit
              </button>

              <div id="previewNotRecording" class="mss-muted"
                   style="margin-top:6px;font-size:0.78rem;">
                Not recording
              </div>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="mss-card">
          <div class="mss-card-header">
            <div class="mss-card-title">Actions</div>
          </div>

          <div class="mss-stack">
            <button id="saveBtn" class="mss-btn mss-btn-primary">
              Save config
            </button>
            <button id="reloadBtn" class="mss-btn mss-btn-outline">
              Reload from server
            </button>
            <button id="openWidgetBtn" class="mss-btn mss-btn-ghost">
              Open Widget
            </button>
            <button id="exportBtn" class="mss-btn mss-btn-ghost">
              Export JSON
            </button>

            <div id="status" class="mss-help"></div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- ES module controller -->
  <script type="module" src="ConfigAdmin.js?v=4"></script>
</body>
</html>
