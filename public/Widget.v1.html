<!--
  MSS Widget â€“ Stable bundle v1.0
  Snapshot date: 2025-11-08
  Files:
    - Widget.v1.html
    - js/widget-core.v1.js
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MSS Widget</title>

  <!-- Shared MSS design system -->
  <link rel="stylesheet" href="themes/MSSStylesheet.css?v=4" />

  <style>
    /* Slight wrapper padding to match admin screens */
    body.mss-root {
      background: var(--mss-bg);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 32px 20px;
      min-height: 100vh;
    }
    .mss-widget-shell {
      width: 100%;
      max-width: 720px;
    }
  </style>

  <!-- ðŸ”‘ Tell widget-core.js where the service lives -->
  <script>
    window.SERVICE_BASE = window.location.hostname.includes('localhost')
      ? 'http://localhost:3000'
      : 'https://mss-widget-mt.onrender.com';
  </script>
</head>
<body class="mss-root">
  <div class="mss-shell mss-widget-shell">
    <section class="mss-card">
      <!-- Header: logo + brand + powered-by -->
      <div class="mss-head mss-row">
        <img id="logo" class="mss-logo" alt="Brand logo" />
        <div>
          <div id="brand" class="mss-card-title"></div>
          <div id="powered" class="mss-muted"></div>
        </div>
      </div>

      <!-- Counter + question -->
      <div id="counter" class="mss-chip"></div>
      <div id="question" class="mss-widget-question"></div>

      <!-- Question navigation -->
      <div class="mss-nav-row">
  	<button id="prevBtn" class="mss-btn">Previous</button>
  	<button id="nextBtn" class="mss-btn mss-btn-outline">Next</button>
      </div>

      <!-- Recording / upload / submit area -->
      <div class="mss-preview-toolbar">
  <button id="recBtn" class="mss-btn mss-btn-primary">Record your response</button>
  <button id="stopBtn" class="mss-btn" disabled>Stop</button>

  <!-- Styled upload button + hidden native input -->
  <div class="mss-file-row">
    <label class="mss-file-btn" id="uploadBtn">
      <span>Choose an audio file</span>
      <input
        id="fileInput"
        type="file"
        accept="audio/*"
      />
    </label>

    <button
      id="clearFileBtn"
      class="mss-btn mss-btn-ghost mss-btn-small"
      style="display:none;"
      type="button"
    >
      Clear file
    </button>

    <span id="fileBadge" class="mss-file-label"></span>
  </div>
</div>

<div class="mss-preview-recbar">
  <span id="recDot" class="mss-preview-dot"></span>
  <span id="recState" class="mss-muted">Not recording</span>
  <span id="timer" class="mss-muted"></span>
</div>

  <!-- Score dashboard dialog -->
  <div id="dashModal" class="mss-dialog-backdrop" hidden>
    <div class="mss-dialog">
      <div class="mss-dialog-title">MSS Score Results</div>
      <iframe
        id="dashFrame"
        src="Dashboard.html?v=2"
        style="border:0;width:100%;height:400px;"
      ></iframe>
      <div class="mss-dialog-actions">
        <button id="closeDash" class="mss-btn mss-btn-ghost">Close</button>
      </div>
    </div>
  </div>

  <!-- Existing widget logic: loads form/config/images & respects Permitupload, etc. -->
  <script src="js/widget-core.js?v=2"></script>
</body>
</html>