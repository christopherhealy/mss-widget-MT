<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Widget Academy – English Speaking Practice</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

 <link rel="stylesheet" href="/themes/mss-academy.css?v=1.0" />
 <link rel="stylesheet"
      href="/themes/mss-academy-dark.css?v=1.0"
      media="(prefers-color-scheme: dark)" />

</head>
<body>
  <div class="page">
    <!-- Header -->
    <header class="header">
      <div class="brand">
        <div class="brand-mark">WA</div>
        <div>
          <div class="brand-text-main">Widget Academy</div>
          <div class="brand-text-sub">English programs with real speaking practice</div>
        </div>
      </div>

      <div class="header-links">
        <span class="pill-link pill-link-mss">
          Powered by MSS Vox
        </span>
        <a
          class="pill-link pill-link-cta"
          href="#practice"
        >
          Start your free practice
        </a>
      </div>
    </header>

    <!-- Hero -->
    <main class="hero">
      <!-- Left column: student-focused copy -->
      <section class="hero-left">
        <h1 class="hero-title">
          CEFR speaking practice for Widget Academy students.
        </h1>
        <p class="hero-tagline">
          Take a short speaking task, record your answer, and get feedback from
          your teacher. It takes just a few minutes and helps you get ready for
          real exams and interviews.
        </p>

        <div class="hero-highlights">
          <div class="hero-bullet">
            <div class="hero-dot"></div>
            <div>Answer one question at a time and practise natural, connected speech.</div>
          </div>
          <div class="hero-bullet">
            <div class="hero-dot"></div>
            <div>Record directly in your browser or upload an audio file from your phone.</div>
          </div>
          <div class="hero-bullet">
            <div class="hero-dot"></div>
            <div>Your responses are stored securely so your teachers can review your progress.</div>
          </div>
        </div>

        <p class="hero-footnote">
          Tip: Find a quiet place, take a deep breath, and imagine you’re in a real exam.
          Your first attempt doesn’t have to be perfect — this page is for practice.
        </p>
      </section>

      <!-- Right column: widget card -->
      <section class="hero-right" id="practice">
        <div class="widget-shell">
          <div class="widget-shell-header">
            <div>
              <div class="widget-shell-title">
                Try today’s speaking practice
              </div>
              <div class="widget-shell-sub">
                Answer the question below using your own words
              </div>
            </div>
          </div>

          <p class="widget-shell-note">
            When you’re ready, press <strong>“Record your response”</strong> and speak
            for the full time. You can listen back before you submit.
          </p>

          <div class="widget-shell-frame">
            <!-- Live widget -->
            <div id="mss-widget-container"></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  const snippet =
`<div id="mss-widget-container"></div>
const snippet =
`<div id="mss-widget-container"></div>
<script>
  (function () {
    const form = document.getElementById("signupForm");
    const statusEl = document.getElementById("signupStatus");
    const resultShell = document.getElementById("resultShell");
    const schoolIdEl = document.getElementById("resultSchoolId");
    const slugEl = document.getElementById("resultSlug");
    const codeEl = document.getElementById("resultCode");

    if (!form) return;

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      if (!statusEl) return;

      statusEl.textContent = "Creating your school…";
      statusEl.className = "mss-signup-status mss-signup-status-working";

      const fd = new FormData(form);
      const payload = {
        schoolName: fd.get("schoolName")?.toString().trim(),
        schoolWebsite: fd.get("schoolWebsite")?.toString().trim(),
        adminName: fd.get("adminName")?.toString().trim(),
        adminEmail: fd.get("adminEmail")?.toString().trim(),
        adminPassword: fd.get("adminPassword")?.toString(),
      };

      try {
        const res = await fetch("/api/signup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        const body = await res.json().catch(() => ({}));

        if (!res.ok || !body.ok) {
          const msg =
            body.message ||
            body.error ||
            "Something went wrong while creating your school.";
          statusEl.textContent = msg;
          statusEl.className = "mss-signup-status mss-signup-status-error";
          return;
        }

        const { schoolId, slug } = body;

        statusEl.textContent = "School created successfully.";
        statusEl.className = "mss-signup-status mss-signup-status-ok";

        if (resultShell && schoolIdEl && slugEl && codeEl) {
          resultShell.classList.remove("mss-hidden");
          schoolIdEl.textContent = schoolId;
          slugEl.textContent = slug;

          const base = window.location.origin.replace(/\/+$/, "");
          const snippet =
`<div id="mss-widget-container"></div>
<script src="${base}/embed.js" data-school-id="${schoolId}"><\/script>`;

          codeEl.textContent = snippet;
        }
      } catch (err) {
        statusEl.textContent =
          "Network error while creating your school. Please try again.";
        statusEl.className = "mss-signup-status mss-signup-status-error";
        console.error("signup error:", err);
      }
    });
  })();
</script>
</body>
</html>